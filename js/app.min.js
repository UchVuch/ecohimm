(()=>{var __webpack_modules__={"./app/js/app.js":
/*!***********************!*\
  !*** ./app/js/app.js ***!
  \***********************/()=>{eval("\r\nconst navMenuToggle = () => {\r\n\tconst buttonMenu = document.querySelector('.button-menu');\r\n\tconst navLinks = document.querySelectorAll('.nav__link');\r\n\tconst nav = document.querySelector('.nav');\r\n\tconst body = document.querySelector('.body');\r\n\tbuttonMenu.addEventListener('click', () => {\r\n\t\tbuttonMenu.classList.toggle('button-menu--close');\r\n\t\tnav.classList.toggle('nav--active');\r\n\t\tbody.classList.toggle('body--lock');\r\n\t});\r\n\tfor (const item of navLinks) {\r\n\t\titem.addEventListener('click', () => {\r\n\t\t\tnav.classList.remove('nav--active');\r\n\t\t\tbody.classList.remove('body--lock');\r\n\t\t});\r\n\t}\r\n}\r\nnavMenuToggle();\r\n\r\nconst modalToggle = () => {\r\n\tconst modalButtonsOpen = document.querySelectorAll('.button-call');\r\n\tconst modalSubmit = document.querySelector('.modal__button');\r\n\tconst modalButtonClose = document.querySelector('.modal-button-close');\r\n\tconst modalOverlay = document.querySelector('.modal__overlay');\r\n\tconst modal = document.querySelector('.modal');\r\n\tconst body = document.querySelector('.body');\r\n\tfor (const item of modalButtonsOpen) {\r\n\t\titem.addEventListener('click', () => {\r\n\t\t\tmodal.classList.add('modal--open');\r\n\t\t\tbody.classList.add('body--lock');\r\n\t\t});\r\n\t}\r\n\tmodalOverlay.addEventListener('click', (e) => {\r\n\t\tif ( e.target == modalOverlay || e.target == modalSubmit || e.target == modalButtonClose ) modal.classList.remove('modal--open');\r\n\t});\r\n}\r\nmodalToggle();\r\n\r\n// import mixitup from 'mixitup';\r\n// const firstMixer = mixitup('.apartmens__list');\r\n\r\n// Quiz \r\nconst quizData = [{\r\n\tnumber: 1,\r\n\ttitle: \"Где Вы располагаетесь?\",\r\n\tanswer_alias: \"money\",\r\n\tanswers: [{\r\n\t\tid: \"1\",\r\n\t\tanswer_title: \"В Липецкой области\",\r\n\t\timage: \"test1.jpg\",\r\n\t\ttype: \"radio\"\r\n\t},\r\n\t{\r\n\t\tid: \"2\",\r\n\t\tanswer_title: \"В Липецке\",\r\n\t\timage: \"test2.jpeg\",\r\n\t\ttype: \"radio\"\r\n\t},\r\n\t]\r\n},\r\n{\r\n\tnumber: 2,\r\n\ttitle: \"На какую сумму вы расчитываете?\",\r\n\tanswer_alias: \"great\",\r\n\tanswers: [{\r\n\t\tid: \"1\",\r\n\t\tanswer_title: \"до 500 тысяч\",\r\n\t\timage: \"rubles.png\",\r\n\t\ttype: \"radio\"\r\n\t},\r\n\t{\r\n\t\tid: \"2\",\r\n\t\tanswer_title: \"до 1 000 000 млн\",\r\n\t\timage: \"rubles.png\",\r\n\t\ttype: \"radio\"\r\n\t},\r\n\t{\r\n\t\tid: \"3\",\r\n\t\tanswer_title: \"от 1 000 000 млн\",\r\n\t\timage: \"rubles.png\",\r\n\t\ttype: \"radio\"\r\n\t}\r\n\t]\r\n},\r\n{\r\n\tnumber: 3,\r\n\ttitle: \"Оставьте свой телефон, мы вам перезвоним\",\r\n\tanswer_alias: \"phone\",\r\n\tanswers: [{\r\n\t\tanswer_title: \"И мы с вами свяжемся!\",\r\n\t\ttype: \"text\"\r\n\t},\r\n\t]\r\n}\r\n];\r\nconst quizTemplate = (data = [], dataLength, options) => {\r\n\tconst { number, title } = data;\r\n\tconst { nextBtnText } = options;\r\n\tconst answers = data.answers.map(item => {\r\n\t\tif (item.image) {\r\n\t\t\treturn `\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<input id=\"test-input-${item.id}\" type=\"${item.type}\" data-valid=\"false\" class=\"quiz-question__answer\" name=\"${data.answer_alias}\" ${item.type == 'text' ? 'placeholder=\"Введите ваш вариант\"' : ''} value=\"${item.type !== 'text' ? item.answer_title : ''}\">\r\n\t\t\t\t\t<label for=\"test-input-${item.id}\" class=\"test__questions-item\">\r\n\t\t\t\t\t\t<img class=\"test__questions-image\" src=\"images/${item.image}\" width=\"334\" height=\"227\">\r\n\t\t\t\t\t\t<span class=\"test__questions-text\">${item.answer_title}</span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</li>\r\n\t\t\t`;\r\n\t\t} else {\r\n\t\t\treturn `\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<input type=\"${item.type}\" data-valid=\"false\" class=\"test-tel\" name=\"${data.answer_alias}\" ${item.type == 'text' ? 'placeholder=\"Введите номер телефона\"' : ''} value=\"${item.type !== 'text' ? item.answer_title : ''}\">\r\n\t\t\t\t\t<span class=\"test-tel__text\">${item.answer_title}</span>\r\n\t\t\t\t</li>\r\n\t\t\t`;\r\n\t\t}\r\n\t});\r\n\treturn `\r\n\t\t<div class=\"test__questions\">\r\n\t\t<h3 class=\"test__questions-title\">\r\n\t\t\t${title}\r\n\t\t</h3>\r\n\t\t<ul class=\"test__questions-items\">\r\n\t\t\t${answers.join('')}\r\n\t\t</ul>\r\n\t\t<div class=\"test__nav\">\r\n\t\t\t<p>\r\n\t\t\t\tВы ответили на: <span>${number}</span>/${dataLength} вопросов\r\n\t\t\t</p>\r\n\t\t\t<div class=\"test__nav-buttons\">\r\n\t\t\t\t<button type=\"button\" class=\"quiz-question__btn\" data-next-btn>${nextBtnText}</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\r\n\t`;\r\n};\r\nclass Quiz {\r\n\tconstructor(selector, data, options) {\r\n\t\tthis.$el = document.querySelector(selector);\r\n\t\tthis.options = options;\r\n\t\tthis.data = data;\r\n\t\tthis.counter = 0;\r\n\t\tthis.dataLength = this.data.length;\r\n\t\tthis.resultArray = [];\r\n\t\tthis.tmp = {};\r\n\t\tthis.init();\r\n\t\tthis.events();\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconsole.log('init!');\r\n\t\tthis.$el.innerHTML = quizTemplate(quizData[this.counter], this.dataLength, this.options);\r\n\t}\r\n\r\n\tevents() {\r\n\t\tthis.$el.addEventListener('click', (e) => {\r\n\t\t\tif (e.target == document.querySelector('[data-next-btn]')) {\r\n\t\t\t\tthis.addToSend();\r\n\t\t\t\tthis.nextQuestion();\r\n\t\t\t}\r\n\r\n\t\t\tif (e.target == document.querySelector('[data-send]')) {\r\n\t\t\t\tthis.addToSend();\r\n\t\t\t\tthis.send();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.$el.addEventListener('change', (e) => {\r\n\t\t\tif (e.target.tagName == 'INPUT') {\r\n\t\t\t\tif (e.target.type !== 'checkbox' && e.target.type !== 'radio') {\r\n\t\t\t\t\tlet elements = this.$el.querySelectorAll('input');\r\n\r\n\t\t\t\t\telements.forEach(el => el.checked = false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.tmp = this.serialize(this.$el);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tnextQuestion() {\r\n\t\tif (this.valid()) {\r\n\t\t\tconsole.log('next question!');\r\n\t\t\tif (this.counter + 1 < this.dataLength) {\r\n\t\t\t\tthis.counter++;\r\n\t\t\t\tthis.$el.innerHTML = quizTemplate(quizData[this.counter], this.dataLength, this.options);\r\n\r\n\t\t\t\tif (this.counter + 1 == this.dataLength) {\r\n\t\t\t\t\tconsole.log(this.$el);\r\n\t\t\t\t\tdocument.querySelector('.test__nav-buttons').insertAdjacentHTML('beforeend', `<button type=\"button\" class=\"quiz-question__subm\" data-send>${this.options.sendBtnText}</button>`);\r\n\t\t\t\t\tthis.$el.querySelector('[data-next-btn]').remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvalid() {\r\n\t\tlet isValid = false;\r\n\t\tlet elements = this.$el.querySelectorAll('input');\r\n\t\telements.forEach(el => {\r\n\t\t\tswitch (el.type) {\r\n\t\t\t\tcase 'text':\r\n\t\t\t\t\t(el.value) ? isValid = true : el.classList.add('error');\r\n\t\t\t\tcase 'checkbox':\r\n\t\t\t\t\t(el.checked) ? isValid = true : el.classList.add('error');\r\n\t\t\t\tcase 'radio':\r\n\t\t\t\t\t(el.checked) ? isValid = true : el.classList.add('error');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn isValid;\r\n\t}\r\n\r\n\taddToSend() {\r\n\t\tthis.resultArray.push(this.tmp);\r\n\t}\r\n\r\n\tsend() {\r\n\t\tif (this.valid()) {\r\n\t\t\tconsole.log('send!');\r\n\r\n\t\t\tlet elements = this.$el.querySelectorAll('input');\r\n\t\t\telements.forEach(el => el.classList.remove('error'));\r\n\r\n\r\n\t\t\tconst formData = new FormData();\r\n\r\n\t\t\tfor (let item of this.resultArray) {\r\n\t\t\t\tfor (let obj in item) {\r\n\t\t\t\t\tformData.append(obj, item[obj].substring(0, item[obj].length - 1))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst response = fetch('mail.php', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tbody: formData\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tserialize(form) {\r\n\t\tlet field, s = {};\r\n\t\tlet valueString = '';\r\n\t\tif (typeof form == 'object' && form.nodeName == \"FORM\") {\r\n\t\t\tlet len = form.elements.length;\r\n\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\tfield = form.elements[i];\r\n\r\n\t\t\t\tif (field.name && !field.disabled && field.type != 'file' && field.type != 'reset' && field.type != 'submit' && field.type != 'button') {\r\n\t\t\t\t\tif (field.type == 'select-multiple') {\r\n\t\t\t\t\t\tfor (j = form.elements[i].options.length - 1; j >= 0; j--) {\r\n\t\t\t\t\t\t\tif (field.options[j].selected)\r\n\t\t\t\t\t\t\t\ts[s.length] = encodeURIComponent(field.name) + \"=\" + encodeURIComponent(field.options[j].value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if ((field.type != 'checkbox' && field.type != 'radio' && field.value) || field.checked) {\r\n\t\t\t\t\t\tvalueString += field.value + ',';\r\n\r\n\t\t\t\t\t\ts[field.name] = valueString;\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn s\r\n\t}\r\n}\r\nwindow.quiz = new Quiz('.test-form', quizData, {\r\n\tnextBtnText: \"Продолжить\",\r\n\tsendBtnText: \"Отправить\"\r\n});\r\n\n\n//# sourceURL=webpack://myproject/./app/js/app.js?")}},__webpack_exports__={};__webpack_modules__["./app/js/app.js"]()})();